## archi - профиль для archiso

Данный репозиторий содержит готовый профиль для сборки iso образа загрузочного диска Arch linux с пред настроенным русским языком.

[Archiso](https://wiki.archlinux.org/title/Archiso_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)) — набор bash скриптов, который используется для создания официальных образов.

**archiso** - гибкий инструмент, который может быть использован как для создания дисков восстановления или установочных, так и для специализированных live-CD/DVD/USB систем. Для создания диска archiso использует профиль с настройками, по которому собирает iso образ. В комплекте archiso идёт два профиля: минимальный и шаблон по которому создаются официальные релизы.

**archi** - сделан из профиля для официальных релизов. Добавлен русский язык, графическая среда XFCE4, браузеры, - подробный список пакетов можно посмотреть в файле [packages.x86_64](https://github.com/ksandronline/archi/blob/main/packages.x86_64).
Данный профиль является открытым и легко редактируемым - каждый может создать свою версию. Описание [archiso](https://wiki.archlinux.org/title/Archiso_(%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%B8%D0%B9)) в Arch linux wiki.

Для настройки отредактируйте файлы профиля.

Описание папок и файлов:

**airootfs** - содержимое этого каталога будет использовано за основу корневой файловой системы. При создании образа он будет первым скопирован в папку с новой корневой файловой системой. Все устанавливаемые далее пакеты могут перезаписать существующие файлы.

**airootfs/root/customize_airootfs.sh** - скрипт выполняемый перед непосредственной сборкой iso образа. В его описании указано что в будущем он перестанет использоваться, но пока нет других альтернатив используем его как данность. Данный скрипт запускается в chroot окружении будущего iso, то есть пути указывать относительно корневой системы будущего диска.

**airootfs/skel/Desktop/archi.py** - после сборки образа этот файл будет на рабочем столе пользователя с ярлыком для запуска. Это python-скрипт для установки Arch linux с графическим интерфейсом.

**packages.x86_64** - файл со списком устанавливаемых пакетов.

**profiledef.sh** - файл с настройками параметров iso образа.

**airootfs/opt/assistant** - папка в которую установлены файлы ассистента.( +ярлык на рабочем столе airootfs/skel/Desktop/)

**airootfs/var/lib/adguardhome** - папка в которую установлен AdGuardHome.(в airootfs/root/customize_airootfs.sh есть строки для его авто запуска.)

Использование профиля аналогично для стандартных профилей и хорошо документировано в Arch linux wiki.

#### Некоторые дополнения.

##### Порядок создания корневой файловой системы:
1. В рабочую директорию копируется содержимое каталога airootfs.
2. Устанавливаются пакеты указанные в файле packages.x86_64.
3. Выполняется скрипт airootfs/root/customize_airootfs.sh
4. Создание iso-образа

**Замечание:** Если ваши настройки были скопированы из airootfs/etc они могут быть перезаписаны при установке пакета. Например zsh так делает. Если необходимо произвести действия после установки пакетов используйте скрипт airootfs/root/customize_airootfs.sh он выполняется перед началом создания образа.

##### profiledef.sh
В этом файле можно выбрать файловую систему erofs или squashfs. А также указать метку диска.

##### AdGuard Home локальный dns
Если настроить параметры сети на статические параметры, то можно использовать AdGuard Home как локальный dns и/или dhcp сервер.

#### Особые дополнения включенные в образ

[AdGuard Home](https://github.com/AdguardTeam/AdguardKnowledgeBase/blob/master/10.home/01.overview/docs.ru.md) описание на странице разработчика.

[Ассистент](https://мойассистент.рф/%D0%BE_%D0%BF%D1%80%D0%BE%D0%B4%D1%83%D0%BA%D1%82%D0%B5) описание на странице разработчика.

### Лицензии
Файлы профиля archi и AdGuardHome распространяются по лицензии [GNU General Public License v3.0](https://www.gnu.org/licenses/gpl-3.0.html)

Ассистент [Правовая информация](https://мойассистент.рф/%D1%81%D0%BF%D1%80%D0%B0%D0%B2%D0%BE%D1%87%D0%BD%D1%8B%D0%B5_%D0%BC%D0%B0%D1%82%D0%B5%D1%80%D0%B8%D0%B0%D0%BB%D1%8B)

### Скачать готовый iso
Скачать готовый iso образ вы можете:
- по [magnet ссылке](magnet:?xt=urn:btih:1f4cb57a594c775b7b70945b88119e24f071e435&dn=archi-2021.10.18-x86%5F64.iso)
- c яндекс диска